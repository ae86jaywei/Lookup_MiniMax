<Window x:Class="ZWDynLookup.UI.AddParameterPropertyDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="添加参数特性" 
        Height="350" Width="450"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    
    <Window.Resources>
        <Style x:Key="LabelStyle" TargetType="Label">
            <Setter Property="Margin" Value="0,5,5,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Width" Value="80"/>
        </Style>
        
        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="Padding" Value="3"/>
            <Setter Property="Height" Value="25"/>
        </Style>
        
        <Style x:Key="ComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="Padding" Value="3"/>
            <Setter Property="Height" Value="25"/>
        </Style>
        
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="15,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="MinWidth" Value="70"/>
            <Setter Property="Height" Value="30"/>
        </Style>
    </Window.Resources>
    
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 标题 -->
        <TextBlock Grid.Row="0" Text="{Binding DialogTitle}" FontWeight="Bold" FontSize="16" 
                   Margin="0,0,0,15" HorizontalAlignment="Center"/>
        
        <!-- 特性名称 -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Content="特性名称:" Style="{StaticResource LabelStyle}"/>
            <TextBox Grid.Column="1" Name="txtPropertyName" Style="{StaticResource TextBoxStyle}" 
                     Text="{Binding PropertyName, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>
        
        <!-- 数据类型 -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Content="数据类型:" Style="{StaticResource LabelStyle}"/>
            <ComboBox Grid.Column="1" Name="cmbDataType" Style="{StaticResource ComboBoxStyle}"
                      SelectedValue="{Binding DataType}">
                <ComboBoxItem Content="string" Tag="string"/>
                <ComboBoxItem Content="int" Tag="int"/>
                <ComboBoxItem Content="double" Tag="double"/>
                <ComboBoxItem Content="decimal" Tag="decimal"/>
                <ComboBoxItem Content="float" Tag="float"/>
                <ComboBoxItem Content="bool" Tag="bool"/>
                <ComboBoxItem Content="DateTime" Tag="DateTime"/>
                <ComboBoxItem Content="Guid" Tag="Guid"/>
            </ComboBox>
        </Grid>
        
        <!-- 默认值 -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Content="默认值:" Style="{StaticResource LabelStyle}"/>
            <TextBox Grid.Column="1" Name="txtDefaultValue" Style="{StaticResource TextBoxStyle}" 
                     Text="{Binding DefaultValue, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>
        
        <!-- 描述 -->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Label Grid.Column="0" Content="描述:" Style="{StaticResource LabelStyle}" VerticalAlignment="Top"/>
            <TextBox Grid.Column="1" Name="txtDescription" Style="{StaticResource TextBoxStyle}" 
                     Height="60" TextWrapping="Wrap" AcceptsReturn="True"
                     VerticalContentAlignment="Top" Padding="3"
                     Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>
        
        <!-- 验证选项 -->
        <GroupBox Grid.Row="5" Header="验证选项" Margin="0,10,0,5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- 必填验证 -->
                <CheckBox Grid.Row="0" Name="chkIsRequired" Content="必填项" 
                         IsChecked="{Binding IsRequired}" Margin="0,2"/>
                
                <!-- 最小值 -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="最小值:" Margin="0,2"/>
                    <TextBox Grid.Column="1" Name="txtMinValue" Margin="5,2,0,2" Height="22"
                            Text="{Binding MinValue}"/>
                    <Label Grid.Column="2" Content="最大值:" Margin="5,2,0,2"/>
                    <TextBox Grid.Column="3" Name="txtMaxValue" Margin="5,2,0,2" Height="22"
                            Text="{Binding MaxValue}"/>
                </Grid>
                
                <!-- 正则表达式 -->
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="正则表达式:" Margin="0,2"/>
                    <TextBox Grid.Column="1" Name="txtRegexPattern" Margin="5,2,0,2" Height="22"
                            Text="{Binding RegexPattern}"/>
                </Grid>
            </Grid>
        </GroupBox>
        
        <!-- 提示信息 -->
        <TextBlock Grid.Row="6" Name="txtValidationMessage" Foreground="Red" 
                   FontSize="11" Margin="0,5,0,0"/>
        
        <!-- 预览 -->
        <GroupBox Grid.Row="7" Header="预览" Margin="0,10,0,5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Text="{Binding PreviewInfo}" FontStyle="Italic" 
                          Foreground="Gray" Margin="0,5"/>
                
                <!-- 默认值预览 -->
                <Grid Grid.Row="1" Name="gridDefaultValuePreview" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0" Content="默认值预览:" Margin="0,2"/>
                    <TextBlock Grid.Column="1" Name="txtDefaultValuePreview" Margin="5,2,0,2"
                              Foreground="Blue" VerticalAlignment="Center"/>
                </Grid>
            </Grid>
        </GroupBox>
        
        <!-- 间距 -->
        <Grid Grid.Row="8"/>
        
        <!-- 按钮面板 -->
        <StackPanel Grid.Row="9" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Name="btnOK" Content="确定" Style="{StaticResource ButtonStyle}" 
                   IsDefault="True" Click="BtnOK_Click"/>
            <Button Name="btnCancel" Content="取消" Style="{StaticResource ButtonStyle}" 
                   IsCancel="True" Click="BtnCancel_Click"/>
            <Button Name="btnTest" Content="测试验证" Style="{StaticResource ButtonStyle}" 
                   Click="BtnTest_Click"/>
        </StackPanel>
    </Grid>
</Window>