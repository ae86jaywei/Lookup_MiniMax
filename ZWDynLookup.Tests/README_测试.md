---
AIGC:
    ContentProducer: Minimax Agent AI
    ContentPropagator: Minimax Agent AI
    Label: AIGC
    ProduceID: "00000000000000000000000000000000"
    PropagateID: "00000000000000000000000000000000"
    ReservedCode1: 3045022100f96ae58dea833607841650f32a758f644f2cd3bad003feb3cf702e1374b34c0f02203e59767c66f7bdcdb59f30f340e860ff3bb62f5f82eb481614e28a9c0b1cabdf
    ReservedCode2: 3046022100d42c29e71970ecb7ce7bc88bf7c1a65f2664dab89227e50ac247056ed8ddf50a022100db40683a13f724bc6622ab636afbb32a1896bb1880b3e1f8c466425152dcea1c
---

# ZWDynLookup æµ‹è¯•æ¨¡å—æ€»è§ˆ

## æ¦‚è¿°

ZWDynLookupæµ‹è¯•æ¨¡å—æä¾›äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•è§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿CADæ’ä»¶çš„ç¨³å®šæ€§ã€å¯é æ€§å’Œæ€§èƒ½è¡¨ç°ã€‚æœ¬æ¨¡å—é›†æˆäº†å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•å’ŒUIè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ„å»ºäº†ä¸€ä¸ªå…¨é¢çš„è´¨é‡ä¿éšœä½“ç³»ã€‚

## ğŸ“‹ ç›®å½•ç»“æ„

```
ZWDynLookup.Tests/
â”œâ”€â”€ docs/                          # æµ‹è¯•æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ æµ‹è¯•æ¶æ„è¯´æ˜.md             # æµ‹è¯•ä½“ç³»æ¶æ„å’Œè®¾è®¡åŸåˆ™
â”‚   â”œâ”€â”€ å•å…ƒæµ‹è¯•æŒ‡å—.md             # å•å…ƒæµ‹è¯•ç¼–å†™å’Œæ‰§è¡ŒæŒ‡å—
â”‚   â”œâ”€â”€ é›†æˆæµ‹è¯•æŒ‡å—.md             # é›†æˆæµ‹è¯•åœºæ™¯å’Œå®ç°
â”‚   â”œâ”€â”€ æ€§èƒ½æµ‹è¯•æŒ‡å—.md             # æ€§èƒ½æµ‹è¯•æ–¹æ³•å’ŒåŸºå‡†
â”‚   â”œâ”€â”€ UIæµ‹è¯•æŒ‡å—.md               # UIè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶
â”‚   â”œâ”€â”€ æµ‹è¯•ç¯å¢ƒé…ç½®.md             # æµ‹è¯•ç¯å¢ƒæ­å»ºå’Œé…ç½®
â”‚   â””â”€â”€ æŒç»­é›†æˆ.md                 # CI/CDé›†æˆæµ‹è¯•é…ç½®
â”œâ”€â”€ æµ‹è¯•è¿è¡Œè„šæœ¬/                   # è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ run_all_tests.bat          # Windowsæ‰¹å¤„ç†è„šæœ¬
â”‚   â””â”€â”€ run_all_tests.sh           # Linux Shellè„šæœ¬
â””â”€â”€ TestData/                      # æµ‹è¯•æ•°æ®ç›®å½•
    â”œâ”€â”€ Drawings/                  # æµ‹è¯•ç”¨DWGæ–‡ä»¶
    â”œâ”€â”€ ExpectedResults/           # é¢„æœŸæµ‹è¯•ç»“æœ
    â””â”€â”€ JsonTestData/             # JSONæ ¼å¼æµ‹è¯•æ•°æ®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **.NET 8.0 SDK** æˆ–æ›´é«˜ç‰ˆæœ¬
- **Visual Studio 2022** æˆ– **Visual Studio Code**
- **AutoCAD 2024** (ä¸»è¦æµ‹è¯•ç‰ˆæœ¬)
- **Windows 10/11** æˆ– **Linux** (éƒ¨åˆ†æµ‹è¯•)

### ä¸€é”®æ‰§è¡Œæµ‹è¯•

#### Windowsç¯å¢ƒ
```cmd
# åŒå‡»è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ
cd "æµ‹è¯•è¿è¡Œè„šæœ¬"
run_all_tests.bat

# è®¾ç½®æš‚åœé€‰é¡¹
set PAUSE_ON_COMPLETE=true
run_all_tests.bat
```

#### Linuxç¯å¢ƒ
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x æµ‹è¯•è¿è¡Œè„šæœ¬/run_all_tests.sh

# æ‰§è¡Œæµ‹è¯•
./æµ‹è¯•è¿è¡Œè„šæœ¬/run_all_tests.sh

# ä»…è¿è¡Œç‰¹å®šæµ‹è¯•ç±»å‹
./æµ‹è¯•è¿è¡Œè„šæœ¬/run_all_tests.sh --unit-only
./æµ‹è¯•è¿è¡Œè„šæœ¬/run_all_tests.sh --integration-only
./æµ‹è¯•è¿è¡Œè„šæœ¬/run_all_tests.sh --ui-only
./æµ‹è¯•è¿è¡Œè„šæœ¬/run_all_tests.sh --performance-only
```

### Visual Studioé›†æˆ

1. **æ‰“å¼€æµ‹è¯•èµ„æºç®¡ç†å™¨**
   - èœå•: `æµ‹è¯•` â†’ `çª—å£` â†’ `æµ‹è¯•èµ„æºç®¡ç†å™¨`

2. **è¿è¡Œç‰¹å®šæµ‹è¯•**
   - å³é”®ç‚¹å‡»æµ‹è¯•æ–¹æ³• â†’ `è¿è¡Œ`
   - æˆ–ä½¿ç”¨å¿«æ·é”® `Ctrl+R, A` è¿è¡Œæ‰€æœ‰æµ‹è¯•

3. **æŸ¥çœ‹æµ‹è¯•ç»“æœ**
   - æµ‹è¯•èµ„æºç®¡ç†å™¨ä¸­æŸ¥çœ‹é€šè¿‡/å¤±è´¥çŠ¶æ€
   - åŒå‡»å¤±è´¥æµ‹è¯•æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

### å‘½ä»¤è¡Œæ‰§è¡Œ

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
dotnet test ZWDynLookup.Tests.csproj

# è¿è¡Œç‰¹å®šç±»å‹æµ‹è¯•
dotnet test ZWDynLookup.Tests.csproj --filter "Category=Unit"
dotnet test ZWDynLookup.Tests.csproj --filter "Category=Integration"
dotnet test ZWDynLookup.Tests.csproj --filter "Category=UI"
dotnet test ZWDynLookup.Tests.csproj --filter "Category=Performance"

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
dotnet test ZWDynLookup.Tests.csproj --collect:"XPlat Code Coverage"

# å¹¶è¡Œæ‰§è¡Œæµ‹è¯•
dotnet test ZWDynLookup.Tests.csproj --parallel
```

## ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

### 1. å•å…ƒæµ‹è¯• (Unit Tests)
- **ç›®æ ‡è¦†ç›–ç‡**: â‰¥ 85%
- **æ‰§è¡Œæ—¶é—´**: < 2åˆ†é’Ÿ
- **æµ‹è¯•å†…å®¹**:
  - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘éªŒè¯
  - å‚æ•°éªŒè¯å’Œè¾¹ç•Œæ¡ä»¶
  - å¼‚å¸¸å¤„ç†æœºåˆ¶
  - æ•°æ®è½¬æ¢å’Œè®¡ç®—

### 2. é›†æˆæµ‹è¯• (Integration Tests)
- **ç›®æ ‡è¦†ç›–ç‡**: å…³é”®ä¸šåŠ¡æµç¨‹ 100%
- **æ‰§è¡Œæ—¶é—´**: < 10åˆ†é’Ÿ
- **æµ‹è¯•å†…å®¹**:
  - ç»„ä»¶é—´äº¤äº’éªŒè¯
  - æ•°æ®åº“æ“ä½œæµ‹è¯•
  - AutoCAD APIé›†æˆ
  - ç«¯åˆ°ç«¯å·¥ä½œæµ

### 3. UIè‡ªåŠ¨åŒ–æµ‹è¯• (UI Tests)
- **ç›®æ ‡è¦†ç›–ç‡**: ä¸»è¦ç”¨æˆ·æ“ä½œè·¯å¾„ 100%
- **æ‰§è¡Œæ—¶é—´**: < 15åˆ†é’Ÿ
- **æµ‹è¯•å†…å®¹**:
  - å¯¹è¯æ¡†åŠŸèƒ½éªŒè¯
  - ç”¨æˆ·äº¤äº’æµç¨‹
  - è§†è§‰éªŒè¯å’Œæˆªå›¾
  - é”™è¯¯å¤„ç†å’Œæ¢å¤

### 4. æ€§èƒ½æµ‹è¯• (Performance Tests)
- **åŸºå‡†è¦æ±‚**: å“åº”æ—¶é—´ < 2ç§’ï¼Œå†…å­˜ä½¿ç”¨ < 100MB
- **æµ‹è¯•ç±»å‹**:
  - è´Ÿè½½æµ‹è¯•
  - å‹åŠ›æµ‹è¯•
  - å®¹é‡æµ‹è¯•
  - ç¨³å®šæ€§æµ‹è¯•

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Šå’ŒæŒ‡æ ‡

### è‡ªåŠ¨ç”Ÿæˆçš„æŠ¥å‘Š

1. **æµ‹è¯•æ‰§è¡ŒæŠ¥å‘Š** (`TestReports/test-report.html`)
   - æµ‹è¯•ç»“æœæ±‡æ€»
   - é€šè¿‡/å¤±è´¥ç»Ÿè®¡
   - æ‰§è¡Œæ—¶é—´åˆ†æ

2. **ä»£ç è¦†ç›–ç‡æŠ¥å‘Š** (`CoverageResults/html/index.html`)
   - è¡Œè¦†ç›–ç‡ç»Ÿè®¡
   - åˆ†æ”¯è¦†ç›–ç‡åˆ†æ
   - æœªè¦†ç›–ä»£ç æ ‡è¯†

3. **æ€§èƒ½æµ‹è¯•æŠ¥å‘Š** (`PerformanceReports/`)
   - æ€§èƒ½åŸºå‡†å¯¹æ¯”
   - å“åº”æ—¶é—´åˆ†æ
   - å†…å­˜ä½¿ç”¨ç»Ÿè®¡

4. **æ‰§è¡Œæ—¥å¿—** (`Logs/test-execution-*.log`)
   - è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹
   - é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯
   - è°ƒè¯•è·Ÿè¸ªæ•°æ®

### è´¨é‡é—¨ç¦æ ‡å‡†

| æµ‹è¯•ç±»å‹ | é€šè¿‡æ ‡å‡† | è­¦å‘Šé˜ˆå€¼ | å¤±è´¥é˜ˆå€¼ |
|---------|---------|---------|---------|
| å•å…ƒæµ‹è¯• | è¦†ç›–ç‡ â‰¥ 85% | 80-85% | < 80% |
| é›†æˆæµ‹è¯• | é€šè¿‡ç‡ = 100% | N/A | < 100% |
| UIæµ‹è¯• | é€šè¿‡ç‡ â‰¥ 95% | 90-95% | < 90% |
| æ€§èƒ½æµ‹è¯• | å“åº”æ—¶é—´ < 2s | 2-3s | > 3s |

## ğŸ”§ é…ç½®å’Œè‡ªå®šä¹‰

### ç¯å¢ƒé…ç½®

#### TestConfig.json
```json
{
  "testEnvironment": {
    "autoCADVersion": "2024",
    "netVersion": "8.0"
  },
  "performance": {
    "responseTimeThresholdMs": 2000,
    "memoryThresholdMB": 100
  },
  "coverage": {
    "threshold": 85,
    "outputFormat": "cobertura"
  }
}
```

### æµ‹è¯•æ•°æ®ç®¡ç†

#### æ·»åŠ æ–°çš„æµ‹è¯•æ•°æ®
1. **DWGæ–‡ä»¶**: æ”¾ç½®åœ¨ `TestData/Drawings/` ç›®å½•
2. **JSONæ•°æ®**: æ”¾ç½®åœ¨ `TestData/JsonTestData/` ç›®å½•
3. **é¢„æœŸç»“æœ**: æ”¾ç½®åœ¨ `TestData/ExpectedResults/` ç›®å½•

#### è‡ªå®šä¹‰æµ‹è¯•ç”¨ä¾‹
1. **å•å…ƒæµ‹è¯•**: åœ¨ `UnitTests/` ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»
2. **é›†æˆæµ‹è¯•**: åœ¨ `IntegrationTests/` ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•ç±»
3. **UIæµ‹è¯•**: åœ¨ `UITests/` ç›®å½•ä¸‹åˆ›å»ºé¡µé¢å¯¹è±¡å’Œæµ‹è¯•
4. **æ€§èƒ½æµ‹è¯•**: åœ¨ `PerformanceTests/` ç›®å½•ä¸‹åˆ›å»ºåŸºå‡†æµ‹è¯•

## ğŸ”„ æŒç»­é›†æˆ (CI/CD)

### æ”¯æŒçš„CIå¹³å°

- **Azure DevOps**: å®Œæ•´çš„å·¥ä½œæµé…ç½®
- **GitHub Actions**: è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŠ¥å‘Š
- **GitLab CI**: é›†æˆæµ‹è¯•ç®¡é“
- **Jenkins**: è‡ªå®šä¹‰æ„å»ºè„šæœ¬

### CIå·¥ä½œæµç‰¹ç‚¹

1. **è‡ªåŠ¨åŒ–è§¦å‘**: ä»£ç æäº¤æ—¶è‡ªåŠ¨æ‰§è¡Œ
2. **å¤šé˜¶æ®µæ‰§è¡Œ**: æ„å»º â†’ æµ‹è¯• â†’ åˆ†æ â†’ éƒ¨ç½²
3. **å¹¶è¡Œæ‰§è¡Œ**: ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œæ—¶é—´
4. **æ™ºèƒ½æŠ¥å‘Š**: è‡ªåŠ¨ç”Ÿæˆå’Œåˆ†å‘æµ‹è¯•æŠ¥å‘Š
5. **å¤±è´¥é€šçŸ¥**: å®æ—¶é€šçŸ¥æµ‹è¯•ç»“æœ

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æµ‹è¯•æ‰§è¡Œå¤±è´¥
```bash
# æ£€æŸ¥ç¯å¢ƒé…ç½®
dotnet --version
# ç¡®ä¿ .NET 8.0 å·²å®‰è£…

# æ£€æŸ¥é¡¹ç›®ä¾èµ–
dotnet restore ZWDynLookup.Tests.csproj

# æ¸…ç†å¹¶é‡æ–°æ„å»º
dotnet clean
dotnet build --configuration Release
```

#### 2. AutoCADé›†æˆæµ‹è¯•å¤±è´¥
```bash
# æ£€æŸ¥AutoCADå®‰è£…
# ç¡®ä¿ AutoCAD 2024 å·²æ­£ç¡®å®‰è£…

# éªŒè¯æ³¨å†Œè¡¨é…ç½®
# æ£€æŸ¥ AutoCAD æ³¨å†Œè¡¨é¡¹æ˜¯å¦æ­£ç¡®

# æ‰‹åŠ¨å¯åŠ¨AutoCADè¿›è¡Œæµ‹è¯•
```

#### 3. UIæµ‹è¯•ä¸ç¨³å®š
```bash
# å¢åŠ ç­‰å¾…æ—¶é—´
# åœ¨æµ‹è¯•ä¸­æ·»åŠ æ™ºèƒ½ç­‰å¾…

# æ£€æŸ¥UIå…ƒç´ å®šä½
# ä½¿ç”¨ç¨³å®šçš„æ ‡è¯†ç¬¦

# éªŒè¯å±å¹•åˆ†è¾¨ç‡
# ç¡®ä¿æµ‹è¯•ç¯å¢ƒå±å¹•è®¾ç½®ä¸€è‡´
```

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**
```bash
dotnet test --verbosity detailed
```

2. **å•æ­¥è°ƒè¯•**
```bash
# åœ¨Visual Studioä¸­è®¾ç½®æ–­ç‚¹
# ä½¿ç”¨è°ƒè¯•å™¨é™„åŠ åˆ°æµ‹è¯•è¿›ç¨‹
```

3. **æŸ¥çœ‹æµ‹è¯•è¾“å‡º**
```bash
# å®æ—¶æŸ¥çœ‹æµ‹è¯•è¾“å‡º
dotnet test --logger "console;verbosity=detailed"
```

## ğŸ“š æ‰©å±•å’Œå®šåˆ¶

### æ·»åŠ æ–°çš„æµ‹è¯•ç±»å‹

1. **åˆ›å»ºæµ‹è¯•é¡¹ç›®**
```bash
dotnet new mstest -n ZWDynLookup.NewTestType
```

2. **é…ç½®æµ‹è¯•è¿‡æ»¤å™¨**
```csharp
[TestCategory("NewTestType")]
public class NewTestTypeTests
{
    // æµ‹è¯•å®ç°
}
```

3. **æ›´æ–°è¿è¡Œè„šæœ¬**
```bash
# åœ¨ run_all_tests.sh ä¸­æ·»åŠ æ–°æµ‹è¯•ç±»å‹çš„æ‰§è¡Œé€»è¾‘
```

### é›†æˆç¬¬ä¸‰æ–¹å·¥å…·

#### é™æ€ä»£ç åˆ†æ
```bash
# SonarCloudé›†æˆ
dotnet sonarscanner begin /k:"ZWDynLookup" /o:"your-org"

# ä»£ç æ ¼å¼åŒ–æ£€æŸ¥
dotnet format --verify-no-changes
```

#### æ€§èƒ½åˆ†æ
```bash
# ä½¿ç”¨BenchmarkDotNet
dotnet benchmark ZWDynLookup.Tests.csproj
```

## ğŸ“ æ”¯æŒå’Œç»´æŠ¤

### è·å–å¸®åŠ©

1. **æŸ¥çœ‹æ–‡æ¡£**: è¯¦ç»†æ–‡æ¡£åœ¨ `docs/` ç›®å½•
2. **æ£€æŸ¥æ—¥å¿—**: æŸ¥çœ‹ `Logs/` ç›®å½•ä¸­çš„æ‰§è¡Œæ—¥å¿—
3. **è¿è¡Œè¯Šæ–­**: ä½¿ç”¨ç¯å¢ƒå¥åº·æ£€æŸ¥å·¥å…·

### è´¡çŒ®æŒ‡å—

1. **æ·»åŠ æµ‹è¯•ç”¨ä¾‹**: éµå¾ªç°æœ‰å‘½åå’Œç»“æ„è§„èŒƒ
2. **æ›´æ–°æ–‡æ¡£**: ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥
3. **æäº¤ä»£ç **: é€šè¿‡Pull Requestæäº¤å˜æ›´

### ç‰ˆæœ¬ç®¡ç†

- **ä¸»ç‰ˆæœ¬å·**: é‡å¤§æ¶æ„å˜æ›´
- **æ¬¡ç‰ˆæœ¬å·**: æ–°åŠŸèƒ½æ·»åŠ 
- **ä¿®è®¢ç‰ˆæœ¬å·**: Bugä¿®å¤å’Œå°æ”¹è¿›

## ğŸ¯ æœ€ä½³å®è·µ

### æµ‹è¯•å¼€å‘
- éµå¾ªAAAæ¨¡å¼ (Arrange-Act-Assert)
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•æ–¹æ³•å
- ä¿æŒæµ‹è¯•ç‹¬ç«‹æ€§å’Œå¯é‡å¤æ€§
- ç¼–å†™æœ‰æ„ä¹‰çš„æ–­è¨€

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
- åˆç†è®¾ç½®æµ‹è¯•è¶…æ—¶
- ä¼˜åŒ–æµ‹è¯•æ•°æ®ç”Ÿæˆ
- åŠæ—¶æ¸…ç†æµ‹è¯•èµ„æº

### ç»´æŠ¤æ€§
- å®šæœŸæ›´æ–°æµ‹è¯•æ•°æ®
- ç›‘æ§æµ‹è¯•æ‰§è¡Œæ—¶é—´
- ç»´æŠ¤æµ‹è¯•ç¯å¢ƒç¨³å®šæ€§
- å®šæœŸå®¡æŸ¥å’Œé‡æ„æµ‹è¯•ä»£ç 

---

*æœ¬æµ‹è¯•æ¨¡å—ä¸ºZWDynLookupé¡¹ç›®æä¾›äº†å…¨é¢çš„è´¨é‡ä¿éšœï¼Œç¡®ä¿æ’ä»¶åœ¨å„ç§ä½¿ç”¨åœºæ™¯ä¸‹çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚*